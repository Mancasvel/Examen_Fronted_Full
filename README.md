# üìö Gu√≠a de Examen - DeliverUS Frontend

## üéØ Informaci√≥n General

Este repositorio contiene **soluciones de ex√°menes pasados** del proyecto DeliverUS. El an√°lisis de los commits revela patrones claros sobre qu√© piden en los ex√°menes y c√≥mo resolverlos exitosamente.

---

## üìä Patrones Identificados en los Ex√°menes

Bas√°ndose en 3 ex√°menes resueltos:
1. **Examen Schedule** (Gesti√≥n de Horarios)
2. **Examen Address** (Gesti√≥n de Direcciones)
3. **Examen Orders** (Gesti√≥n de Pedidos)

### üîë Estructura T√≠pica del Examen

**Todos los ex√°menes siguen el mismo patr√≥n con 4 ejercicios:**

1. **Ejercicio 1 (3 puntos)**: Listado de elementos con datos del backend
2. **Ejercicio 2 (3 puntos)**: Creaci√≥n/Edici√≥n de elementos con formulario
3. **Ejercicio 3 (2 puntos)**: Vista adicional (anal√≠ticas, detalles, etc.)
4. **Ejercicio 4 (2 puntos)**: Acci√≥n complementaria (cambio de estado, eliminaci√≥n, etc.)

---

## üõ†Ô∏è Tecnolog√≠as y Herramientas Clave

### **Librer√≠as Obligatorias**
```json
{
  "formik": "validaci√≥n y gesti√≥n de formularios",
  "yup": "esquemas de validaci√≥n",
  "react-native-flash-message": "mensajes de √©xito/error",
  "@expo/vector-icons": "iconograf√≠a (MaterialCommunityIcons)",
  "react-navigation": "navegaci√≥n entre pantallas"
}
```

### **Hooks React Esenciales**
- `useState`: Gesti√≥n de estado local
- `useEffect`: Carga de datos y side effects
- `useContext`: Acceso al usuario logueado (AuthorizationContext)

---

## üìù Checklist de Implementaci√≥n

### ‚úÖ Para CADA Ejercicio de Listado (3 puntos)

1. **Estado y Carga de Datos**
   ```javascript
   const [items, setItems] = useState([])
   
   useEffect(() => {
     if (loggedInUser) {
       fetchItems()
     } else {
       setItems([])
     }
   }, [loggedInUser, route])
   
   const fetchItems = async () => {
     try {
       const data = await getItemsFromAPI(id)
       setItems(data)
     } catch (error) {
       showMessage({
         message: `Error: ${error}`,
         type: 'error',
         style: GlobalStyles.flashStyle,
         titleStyle: GlobalStyles.flashTextStyle
       })
     }
   }
   ```

2. **FlatList con Componentes**
   - `ListHeaderComponent`: Bot√≥n de crear
   - `ListEmptyComponent`: Mensaje cuando no hay datos
   - `renderItem`: Funci√≥n para renderizar cada elemento
   - `keyExtractor`: Siempre usar `.toString()` en el id

3. **ImageCard para Cada Item**
   - Mostrar informaci√≥n relevante
   - Botones de acci√≥n (editar, eliminar)

### ‚úÖ Para CADA Ejercicio de Creaci√≥n/Edici√≥n (3 puntos)

1. **Formik Setup**
   ```javascript
   const [backendErrors, setBackendErrors] = useState()
   const [initialValues, setInitialValues] = useState({ ... })
   
   const validationSchema = yup.object().shape({
     campo: yup.string().required('Campo obligatorio'),
     email: yup.string().email('Email inv√°lido'),
     number: yup.number().moreThan(0, 'Debe ser mayor que 0'),
     time: yup.string().matches(/regex/, 'Formato incorrecto')
   })
   ```

2. **useEffect para Edici√≥n** (cargar datos existentes)
   ```javascript
   useEffect(() => {
     async function fetchDetail() {
       try {
         const data = await getItemById(route.params.id)
         setInitialValues(buildInitialValues(data, initialValues))
       } catch (error) {
         showMessage({ ... })
       }
     }
     fetchDetail()
   }, [route])
   ```

3. **Funci√≥n Submit**
   ```javascript
   const handleSubmit = async (values) => {
     setBackendErrors([])
     try {
       const result = await createOrUpdateItem(values)
       showMessage({
         message: `Item ${result.id} guardado`,
         type: 'success',
         style: GlobalStyles.flashStyle,
         titleStyle: GlobalStyles.flashTextStyle
       })
       navigation.navigate('ListScreen', { dirty: true })
     } catch (error) {
       console.log(error)
       setBackendErrors(error.errors)
     }
   }
   ```

4. **Renderizado de Errores**
   ```javascript
   {backendErrors && backendErrors.map((error, index) => 
     <TextError key={index}>{error.param}-{error.msg}</TextError>
   )}
   ```

5. **enableReinitialize en Formik** para edici√≥n
   ```javascript
   <Formik enableReinitialize initialValues={initialValues} ...>
   ```

### ‚úÖ Para Ejercicios de Vista/Anal√≠ticas (2 puntos)

1. **Estado para los Datos**
   ```javascript
   const [analytics, setAnalytics] = useState(null)
   ```

2. **Fetch en useEffect**
   ```javascript
   useEffect(() => {
     fetchAnalytics()
   }, [route])
   ```

3. **Renderizado Condicional**
   ```javascript
   {analytics !== null && renderAnalytics()}
   ```

4. **Estilos con Flexbox**
   - Usar `flexDirection: 'row'` para distribuir horizontalmente
   - `justifyContent: 'space-around'` o `'space-between'`

### ‚úÖ Para Ejercicios de Acciones (2 puntos)

1. **Bot√≥n con Acci√≥n**
   ```javascript
   <Pressable
     onPress={() => handleAction(item)}
     style={({ pressed }) => [
       { backgroundColor: pressed ? brandPrimaryTap : brandPrimary },
       styles.button
     ]}
   >
   ```

2. **Manejo de la Acci√≥n**
   ```javascript
   const handleAction = async (item) => {
     try {
       await performAction(item.id)
       showMessage({ message: '√âxito', type: 'success', ... })
       fetchItems() // Refrescar lista
     } catch (error) {
       showMessage({ message: `Error: ${error}`, type: 'danger', ... })
     }
   }
   ```

3. **Modal de Confirmaci√≥n** (si aplica)
   ```javascript
   const [itemToDelete, setItemToDelete] = useState(null)
   
   <DeleteModal
     isVisible={itemToDelete !== null}
     onCancel={() => setItemToDelete(null)}
     onConfirm={() => confirmDelete(itemToDelete)}
   >
     <TextRegular>¬øConfirmar acci√≥n?</TextRegular>
   </DeleteModal>
   ```

---

## üîå Endpoints API

### **Patr√≥n de Endpoints**

```javascript
// RestaurantEndpoints.js o similar
import { get, post, put, destroy, patch } from './helpers/ApiRequestsHelper'

// Obtener todos
function getAll() {
  return get('resource')
}

// Obtener por ID
function getById(id) {
  return get(`resource/${id}`)
}

// Crear
function create(data) {
  return post('resource', data)
}

// Actualizar
function update(id, data) {
  return put(`resource/${id}`, data)
}

// Eliminar
function remove(id) {
  return destroy(`resource/${id}`)
}

// Acci√≥n espec√≠fica (patch)
function specificAction(id) {
  return patch(`resource/${id}/action`)
}

export { getAll, getById, create, update, remove, specificAction }
```

**‚ö†Ô∏è Importante**: 
- Siempre usar template literals con backticks para URLs con par√°metros
- Exportar todas las funciones necesarias
- Importar en las pantallas seg√∫n necesidad

---

## üß≠ Navegaci√≥n

### **Agregar Pantallas al Stack Navigator**

```javascript
// RestaurantsStack.js o ProfileStack.js
import NewScreen from './NewScreen'

// Dentro del Stack.Navigator
<Stack.Screen
  name='NewScreen'
  component={NewScreen}
  options={{ title: 'T√≠tulo de la Pantalla' }}
/>
```

### **Navegar Entre Pantallas**

```javascript
// Navegar con par√°metros
navigation.navigate('DetailScreen', { id: item.id })

// Navegar con "dirty flag" para refrescar
navigation.navigate('ListScreen', { dirty: true })

// Acceder a par√°metros
const { id } = route.params
```

---

## üé® Estilos y UI

### **Patrones de Estilo Comunes**

```javascript
const styles = StyleSheet.create({
  container: {
    flex: 1
  },
  button: {
    borderRadius: 8,
    height: 40,
    padding: 10,
    width: '100%',
    marginTop: 20,
    marginBottom: 20
  },
  actionButton: {
    borderRadius: 8,
    height: 40,
    marginTop: 12,
    margin: '1%',
    padding: 10,
    alignSelf: 'center',
    width: '50%'
  },
  actionButtonsContainer: {
    flexDirection: 'row',
    bottom: 5,
    position: 'absolute',
    width: '90%'
  },
  text: {
    fontSize: 16,
    color: 'white',
    textAlign: 'center',
    marginLeft: 5
  },
  emptyList: {
    textAlign: 'center',
    padding: 50
  }
})
```

### **Botones con Estado Pressed**

```javascript
<Pressable
  onPress={handleAction}
  style={({ pressed }) => [
    {
      backgroundColor: pressed
        ? GlobalStyles.brandSuccessTap
        : GlobalStyles.brandSuccess
    },
    styles.button
  ]}
>
  <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center' }}>
    <MaterialCommunityIcons name='icon-name' color='white' size={20}/>
    <TextRegular textStyle={styles.text}>Texto</TextRegular>
  </View>
</Pressable>
```

---

## üß™ Validaci√≥n con Yup

### **Tipos de Validaci√≥n M√°s Comunes**

```javascript
const validationSchema = yup.object().shape({
  // String obligatorio
  name: yup.string().required('Nombre es obligatorio'),
  
  // Email
  email: yup.string().email('Email inv√°lido').required('Email obligatorio'),
  
  // N√∫mero positivo
  price: yup.number()
    .required('Precio obligatorio')
    .moreThan(0, 'Debe ser mayor que 0'),
  
  // C√≥digo postal (5 d√≠gitos)
  zipCode: yup.string()
    .matches(/^[0-9]{5}$/, 'Debe tener 5 d√≠gitos')
    .required('Obligatorio'),
  
  // Hora HH:mm:ss
  time: yup.string()
    .required('Hora obligatoria')
    .matches(
      /^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/,
      'Formato debe ser HH:mm:ss (ej: 14:30:00)'
    ),
  
  // Boolean
  isDefault: yup.boolean(),
  
  // String opcional
  description: yup.string()
})
```

---

## üö® Manejo de Errores

### **Patr√≥n Est√°ndar**

```javascript
try {
  const result = await apiCall()
  // √âxito
  showMessage({
    message: `Operaci√≥n exitosa`,
    type: 'success',
    style: GlobalStyles.flashStyle,
    titleStyle: GlobalStyles.flashTextStyle
  })
} catch (error) {
  // Error del backend
  console.log(error)
  setBackendErrors(error.errors)
  
  // O mensaje de error directo
  showMessage({
    message: `Error: ${error}`,
    type: 'error', // o 'danger'
    style: GlobalStyles.flashStyle,
    titleStyle: GlobalStyles.flashTextStyle
  })
}
```

---

## üìã Checklist Pre-Examen

### **Antes de Empezar**
- [ ] Leer TODO el enunciado cuidadosamente
- [ ] Identificar cu√°ntas pantallas nuevas hay que crear
- [ ] Identificar qu√© endpoints necesitas (pueden estar ya implementados)
- [ ] Revisar las figuras/im√°genes del enunciado

### **Durante el Examen**
- [ ] Crear los endpoints primero (si no existen)
- [ ] Agregar las pantallas al Stack Navigator
- [ ] Implementar el listado primero (suele ser el ejercicio 1)
- [ ] Implementar formularios de creaci√≥n/edici√≥n
- [ ] Implementar funcionalidades adicionales
- [ ] Probar CADA funcionalidad antes de pasar a la siguiente

### **Antes de Entregar**
- [ ] Verificar que no hay errores de consola
- [ ] Probar todas las funcionalidades implementadas
- [ ] Verificar que los mensajes de √©xito/error se muestran correctamente
- [ ] Verificar navegaci√≥n entre pantallas
- [ ] Comprobar que se cumplen las pruebas de aceptaci√≥n

---

## üéì Consejos de Estudio

### **Pr√°ctica Efectiva**
1. **Repite los ex√°menes pasados** sin mirar las soluciones
2. **Cronom√©trate**: Tienes tiempo limitado
3. **Memoriza los patrones**: Son siempre los mismos
4. **Practica la validaci√≥n con Yup**: Es cr√≠tico
5. **Domina Formik**: Aparece en todos los ex√°menes

### **Conceptos Clave a Dominar**
- useState y useEffect
- Navegaci√≥n con React Navigation
- Formik + Yup
- FlatList y renderizado condicional
- Async/await y manejo de errores
- Estilos con StyleSheet y Flexbox

### **Errores Comunes a Evitar**
- ‚ùå Olvidar `enableReinitialize` en formularios de edici√≥n
- ‚ùå No usar `toString()` en `keyExtractor` de FlatList
- ‚ùå Olvidar agregar la pantalla al Stack Navigator
- ‚ùå No manejar el estado de loading/error
- ‚ùå No mostrar mensajes de √©xito/error
- ‚ùå No refrescar la lista despu√©s de crear/editar/eliminar
- ‚ùå Olvidar exportar funciones en los endpoints

---

## üìÇ Estructura de Archivos T√≠pica

```
DeliverUS-Frontend-Owner/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RestaurantEndpoints.js     # Endpoints de restaurantes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderEndpoints.js          # Endpoints de pedidos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressEndpoints.js        # Endpoints de direcciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ApiRequestsHelper.js   # get, post, put, destroy, patch
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ restaurants/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RestaurantsStack.js           # Navegador
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RestaurantsScreen.js          # Lista
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RestaurantDetailScreen.js     # Detalle
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateRestaurantScreen.js     # Crear
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditRestaurantScreen.js       # Editar
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrdersScreen.js               # Lista de pedidos
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EditOrderScreen.js            # Editar pedido
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AddressScreen.js              # Lista de direcciones
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AddressDetailScreen.js        # Crear direcci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ImageCard.js           # Tarjeta con imagen
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputItem.js           # Input de formulario
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TextError.js           # Texto de error
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeleteModal.js         # Modal de confirmaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îî‚îÄ‚îÄ GlobalStyles.js        # Colores y estilos globales
```

---

## ‚ö° Snippets √ötiles

### **Template de Pantalla de Listado**

```javascript
import React, { useContext, useEffect, useState } from 'react'
import { StyleSheet, FlatList, Pressable, View } from 'react-native'
import { getItems, removeItem } from '../../api/ItemEndpoints'
import { MaterialCommunityIcons } from '@expo/vector-icons'
import * as GlobalStyles from '../../styles/GlobalStyles'
import { AuthorizationContext } from '../../context/AuthorizationContext'
import { showMessage } from 'react-native-flash-message'
import DeleteModal from '../../components/DeleteModal'
import ImageCard from '../../components/ImageCard'
import TextSemiBold from '../../components/TextSemibold'
import TextRegular from '../../components/TextRegular'

export default function ItemsScreen ({ navigation, route }) {
  const [items, setItems] = useState([])
  const [itemToBeDeleted, setItemToBeDeleted] = useState(null)
  const { loggedInUser } = useContext(AuthorizationContext)

  useEffect(() => {
    if (loggedInUser) {
      fetchItems()
    } else {
      setItems([])
    }
  }, [loggedInUser, route])

  const fetchItems = async () => {
    try {
      const fetchedItems = await getItems(route.params.id)
      setItems(fetchedItems)
    } catch (error) {
      showMessage({
        message: `Error obteniendo items: ${error}`,
        type: 'error',
        style: GlobalStyles.flashStyle,
        titleStyle: GlobalStyles.flashTextStyle
      })
    }
  }

  const remove = async (item) => {
    try {
      await removeItem(item.id)
      await fetchItems()
      setItemToBeDeleted(null)
      showMessage({
        message: `Item ${item.name} eliminado`,
        type: 'success',
        style: GlobalStyles.flashStyle,
        titleStyle: GlobalStyles.flashTextStyle
      })
    } catch (error) {
      setItemToBeDeleted(null)
      showMessage({
        message: `Error eliminando item: ${error}`,
        type: 'error',
        style: GlobalStyles.flashStyle,
        titleStyle: GlobalStyles.flashTextStyle
      })
    }
  }

  const renderItem = ({ item }) => {
    return (
      <ImageCard
        imageUri={item.image}
        title={item.name}
        onPress={() => navigation.navigate('EditItemScreen', { id: item.id })}
      >
        <TextRegular>{item.description}</TextRegular>
        <TextSemiBold>{item.price}‚Ç¨</TextSemiBold>
        
        <View style={styles.actionButtonsContainer}>
          <Pressable
            onPress={() => navigation.navigate('EditItemScreen', { id: item.id })}
            style={({ pressed }) => [
              { backgroundColor: pressed ? GlobalStyles.brandBlueTap : GlobalStyles.brandBlue },
              styles.actionButton
            ]}
          >
            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center' }}>
              <MaterialCommunityIcons name='pencil' color='white' size={20}/>
              <TextRegular textStyle={styles.text}>Edit</TextRegular>
            </View>
          </Pressable>

          <Pressable
            onPress={() => setItemToBeDeleted(item)}
            style={({ pressed }) => [
              { backgroundColor: pressed ? GlobalStyles.brandPrimaryTap : GlobalStyles.brandPrimary },
              styles.actionButton
            ]}
          >
            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center' }}>
              <MaterialCommunityIcons name='delete' color='white' size={20}/>
              <TextRegular textStyle={styles.text}>Delete</TextRegular>
            </View>
          </Pressable>
        </View>
      </ImageCard>
    )
  }

  const renderEmptyList = () => {
    return (
      <TextRegular textStyle={styles.emptyList}>
        No hay items disponibles.
      </TextRegular>
    )
  }

  const renderHeader = () => {
    return (
      <>
        {loggedInUser &&
          <Pressable
            onPress={() => navigation.navigate('CreateItemScreen', { id: route.params.id })}
            style={({ pressed }) => [
              { backgroundColor: pressed ? GlobalStyles.brandGreenTap : GlobalStyles.brandGreen },
              styles.button
            ]}
          >
            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center' }}>
              <MaterialCommunityIcons name='plus-circle' color='white' size={20}/>
              <TextRegular textStyle={styles.text}>Create Item</TextRegular>
            </View>
          </Pressable>
        }
      </>
    )
  }

  return (
    <>
      <FlatList
        style={styles.container}
        data={items}
        renderItem={renderItem}
        keyExtractor={item => item.id.toString()}
        ListHeaderComponent={renderHeader}
        ListEmptyComponent={renderEmptyList}
      />
      <DeleteModal
        isVisible={itemToBeDeleted !== null}
        onCancel={() => setItemToBeDeleted(null)}
        onConfirm={() => remove(itemToBeDeleted)}
      >
        <TextRegular>¬øConfirmar eliminaci√≥n?</TextRegular>
      </DeleteModal>
    </>
  )
}

const styles = StyleSheet.create({
  container: { flex: 1 },
  button: {
    borderRadius: 8,
    height: 40,
    marginTop: 12,
    padding: 10,
    alignSelf: 'center',
    width: '80%'
  },
  actionButton: {
    borderRadius: 8,
    height: 40,
    marginTop: 12,
    margin: '1%',
    padding: 10,
    width: '50%'
  },
  actionButtonsContainer: {
    flexDirection: 'row',
    bottom: 5,
    position: 'absolute',
    width: '90%'
  },
  text: {
    fontSize: 16,
    color: 'white',
    alignSelf: 'center',
    marginLeft: 5
  },
  emptyList: {
    textAlign: 'center',
    padding: 50
  }
})
```

### **Template de Pantalla de Creaci√≥n/Edici√≥n**

```javascript
import React, { useEffect, useState } from 'react'
import { ScrollView, StyleSheet, View, Pressable } from 'react-native'
import { MaterialCommunityIcons } from '@expo/vector-icons'
import * as yup from 'yup'
import { Formik } from 'formik'
import { getItemById, createItem, updateItem } from '../../api/ItemEndpoints'
import InputItem from '../../components/InputItem'
import TextRegular from '../../components/TextRegular'
import TextError from '../../components/TextError'
import * as GlobalStyles from '../../styles/GlobalStyles'
import { showMessage } from 'react-native-flash-message'
import { buildInitialValues } from '../Helper'

export default function CreateEditItemScreen ({ navigation, route }) {
  const [backendErrors, setBackendErrors] = useState()
  const [item, setItem] = useState()
  const [initialValues, setInitialValues] = useState({ name: '', description: '', price: '' })

  const validationSchema = yup.object().shape({
    name: yup.string().required('Nombre es obligatorio'),
    description: yup.string(),
    price: yup.number().required('Precio es obligatorio').moreThan(0, 'Debe ser mayor que 0')
  })

  // Solo para EDICI√ìN
  useEffect(() => {
    if (route.params?.id) {
      async function fetchItemDetail() {
        try {
          const fetchedItem = await getItemById(route.params.id)
          setItem(fetchedItem)
          setInitialValues(buildInitialValues(fetchedItem, initialValues))
        } catch (error) {
          showMessage({
            message: `Error cargando item: ${error}`,
            type: 'error',
            style: GlobalStyles.flashStyle,
            titleStyle: GlobalStyles.flashTextStyle
          })
        }
      }
      fetchItemDetail()
    }
  }, [route])

  const handleSubmit = async (values) => {
    setBackendErrors([])
    try {
      let result
      if (route.params?.id) {
        // Editar
        result = await updateItem(route.params.id, values)
      } else {
        // Crear
        result = await createItem(values)
      }
      
      showMessage({
        message: `Item ${result.name} guardado correctamente`,
        type: 'success',
        style: GlobalStyles.flashStyle,
        titleStyle: GlobalStyles.flashTextStyle
      })
      navigation.navigate('ItemsScreen', { dirty: true })
    } catch (error) {
      console.log(error)
      setBackendErrors(error.errors)
    }
  }

  return (
    <Formik
      enableReinitialize  // IMPORTANTE para edici√≥n
      validationSchema={validationSchema}
      initialValues={initialValues}
      onSubmit={handleSubmit}
    >
      {({ handleSubmit }) => (
        <ScrollView>
          <View style={{ alignItems: 'center' }}>
            <View style={{ width: '60%' }}>
              <InputItem name='name' label='Nombre:' />
              <InputItem name='description' label='Descripci√≥n:' />
              <InputItem name='price' label='Precio:' keyboardType='numeric' />

              {backendErrors && backendErrors.map((error, index) => (
                <TextError key={index}>{error.param} - {error.msg}</TextError>
              ))}

              <Pressable
                onPress={handleSubmit}
                style={({ pressed }) => [
                  {
                    backgroundColor: pressed
                      ? GlobalStyles.brandSuccessTap
                      : GlobalStyles.brandSuccess
                  },
                  styles.button
                ]}
              >
                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center' }}>
                  <MaterialCommunityIcons name='content-save' color='white' size={20} />
                  <TextRegular textStyle={styles.text}>Save</TextRegular>
                </View>
              </Pressable>
            </View>
          </View>
        </ScrollView>
      )}
    </Formik>
  )
}

const styles = StyleSheet.create({
  button: {
    borderRadius: 8,
    height: 40,
    padding: 10,
    width: '100%',
    marginTop: 20,
    marginBottom: 20
  },
  text: {
    fontSize: 16,
    color: 'white',
    textAlign: 'center',
    marginLeft: 5
  }
})
```

---

## üéØ Resumen Final

### **F√≥rmula del √âxito**
1. **Domina los patrones** ‚Üí Todos los ex√°menes son similares
2. **Practica con tiempo** ‚Üí Simula condiciones de examen
3. **Entiende el flujo** ‚Üí Endpoints ‚Üí Pantallas ‚Üí Navegaci√≥n ‚Üí UI
4. **No inventes** ‚Üí Usa los patrones establecidos
5. **Prueba TODO** ‚Üí Antes de entregar

### **Distribuci√≥n de Puntos**
- **6 puntos**: Listado + Creaci√≥n/Edici√≥n (CRUD b√°sico)
- **4 puntos**: Funcionalidades adicionales

**Si dominas el CRUD, ya tienes m√°s de la mitad del examen resuelto.**

---

## üìû Recursos Adicionales

- **Documentaci√≥n Backend**: [DeliverUS-Backend](https://github.com/IISSI2-IS-2025)
- **Formik**: https://formik.org/
- **Yup**: https://github.com/jquense/yup
- **React Navigation**: https://reactnavigation.org/
- **React Native**: https://reactnative.dev/

---

## ‚ö° Quick Start - Preparaci√≥n del Entorno

### Windows
```bash
npm run install:all:win
npm run migrate:backend
npm run start:backend  # Terminal 1
npm run start:frontend # Terminal 2
```

### Linux/MacOS
```bash
npm run install:all:bash
npm run migrate:backend
npm run start:backend  # Terminal 1
npm run start:frontend # Terminal 2
```

---

---

## üìù Resumen de Ex√°menes Resueltos

### üîµ **Examen 1: Schedules (Horarios de Productos)**

**Concepto**: Gesti√≥n de horarios (franjas horarias) que se pueden asignar a productos de un restaurante para controlar su disponibilidad.

#### Requisitos Funcionales Implementados:
1. **RF.01** - Visualizar productos con horarios asignados *(1.5 puntos)*
2. **RF.02** - Listado de horarios con n√∫mero de productos asociados *(2.5 puntos)*
3. **RF.03** - Borrado de horarios con confirmaci√≥n *(1 punto)*
4. **RF.04** - Creaci√≥n de horarios *(proporcionado)*
5. **RF.05** - Edici√≥n de horarios existentes *(2.5 puntos)*
6. **RF.06** - Asignar/desasignar horario a productos *(2.5 puntos)*

#### Archivos Modificados:
```
- DeliverUS-Frontend-Owner/src/screens/restaurants/
  ‚îú‚îÄ‚îÄ RestaurantScheduleScreen.js      (Listado + borrado)
  ‚îú‚îÄ‚îÄ CreateScheduleScreen.js          (Crear horario)
  ‚îú‚îÄ‚îÄ EditScheduleScreen.js            (Editar horario)
  ‚îú‚îÄ‚îÄ EditProductScreen.js             (Asignar horario)
  ‚îî‚îÄ‚îÄ RestaurantDetailScreen.js        (Mostrar horarios en productos)
- DeliverUS-Frontend-Owner/src/api/RestaurantEndpoints.js
```

#### Validaciones Clave:
- **startTime y endTime**: Obligatorios, formato `HH:mm:ss`
- Regex: `/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/`

#### Endpoints Backend:
- `GET /restaurants/:restaurantId/schedules` - Obtener horarios (incluye productos asociados)
- `POST /restaurants/:restaurantId/schedules` - Crear horario
- `PUT /restaurants/:restaurantId/schedules/:scheduleId` - Actualizar horario
- `DELETE /restaurants/:restaurantId/schedules/:scheduleId` - Eliminar horario
- `PUT /products/:productId` - Asignar/desasignar schedule (campo `scheduleId`)

#### Conceptos Clave:
- **Relaci√≥n 1:N**: Un schedule puede tener muchos productos
- **scheduleId: null** para desasignar horario de un producto
- Icono usado: `timetable` (MaterialCommunityIcons)

---

### üü¢ **Examen 2: Address (Direcciones de Env√≠o)**

**Concepto**: Gesti√≥n de direcciones de env√≠o de un usuario, permitiendo crear, eliminar y marcar una como predeterminada.

#### Requisitos Funcionales Implementados:
1. **Listado de direcciones** del usuario con opci√≥n de eliminar y marcar como predeterminada
2. **Creaci√≥n de nuevas direcciones** con validaci√≥n completa
3. **Establecer direcci√≥n predeterminada** (solo una a la vez)
4. **Eliminaci√≥n de direcciones** con modal de confirmaci√≥n

#### Archivos Modificados:
```
- DeliverUS-Frontend-Owner/src/screens/profile/
  ‚îú‚îÄ‚îÄ AddressScreen.js          (Listado + acciones)
  ‚îî‚îÄ‚îÄ AddressDetailScreen.js    (Crear direcci√≥n)
- DeliverUS-Frontend-Owner/src/api/AddressEndpoints.js
```

#### Validaciones Clave:
```javascript
alias: yup.string().required()
street: yup.string().required()
city: yup.string().required()
province: yup.string()
zipCode: yup.string()
  .matches(/^[0-9]{5}$/, 'Debe tener 5 d√≠gitos')
  .required()
isDefault: yup.boolean()
```

#### Endpoints Backend:
- `GET /shippingaddresses` - Obtener direcciones del usuario
- `POST /shippingaddresses` - Crear nueva direcci√≥n
- `PATCH /shippingaddresses/:id/default` - Marcar como predeterminada
- `DELETE /shippingaddresses/:id` - Eliminar direcci√≥n

#### Conceptos Clave:
- **Switch** para `isDefault` en formulario
- **Iconos**: `star` (predeterminada), `star-outline` (no predeterminada), `trash` (eliminar)
- **FlatList** con `renderItem` para mostrar direcciones
- Navegaci√≥n en **ProfileStack** (no en RestaurantsStack)

---

### üü† **Examen 3: Orders (Gesti√≥n de Pedidos)**

**Concepto**: Visualizaci√≥n, edici√≥n y gesti√≥n del ciclo de vida de pedidos de un restaurante.

#### Requisitos Funcionales Implementados:
1. **RF.01** - Listado de pedidos por restaurante *(3 puntos)*
2. **RF.02** - Edici√≥n de pedidos (address y price) *(3 puntos)*
3. **RF.03** - Anal√≠ticas de pedidos del restaurante *(2 puntos)*
4. **RF.04** - Cambio de estado de pedidos *(2 puntos)*

#### Archivos Modificados:
```
- DeliverUS-Frontend-Owner/src/screens/orders/
  ‚îú‚îÄ‚îÄ OrdersScreen.js           (Listado + anal√≠ticas + cambio estado)
  ‚îî‚îÄ‚îÄ EditOrderScreen.js        (Editar address y price)
- DeliverUS-Frontend-Owner/src/api/
  ‚îú‚îÄ‚îÄ OrderEndpoints.js         (NUEVO)
  ‚îî‚îÄ‚îÄ RestaurantEndpoints.js    (a√±adir getRestaurantOrders y getRestaurantAnalytics)
- DeliverUS-Frontend-Owner/src/screens/restaurants/RestaurantsStack.js
```

#### Validaciones Clave:
```javascript
address: yup.string().required('Address is required')
price: yup.number()
  .required('Price is required')
  .moreThan(0, 'Price must be greater than 0')
```

#### Endpoints Backend:
- `GET /restaurants/:restaurantId/orders` - Obtener pedidos del restaurante
- `GET /restaurants/:restaurantId/analytics` - Obtener anal√≠ticas
- `GET /orders/:orderId` - Obtener un pedido por ID
- `PUT /orders/:orderId/by-owner` - Actualizar pedido (solo address y price)
- `PATCH /orders/:orderId/confirm` - pending ‚Üí in process
- `PATCH /orders/:orderId/send` - in process ‚Üí sent
- `PATCH /orders/:orderId/deliver` - sent ‚Üí delivered

#### M√°quina de Estados (RF.04):
```
pending ‚Üí in process ‚Üí sent ‚Üí delivered
```
**IMPORTANTE**: Los pedidos en estado `delivered` NO tienen bot√≥n "Advance"

#### Estructura de Anal√≠ticas (RF.03):
```javascript
{
  restaurantId: 1,
  invoicedToday: 65.0,           // Total facturado hoy
  numPendingOrders: 1,           // Pedidos en pending
  numDeliveredTodayOrders: 1,    // Pedidos delivered hoy
  numYesterdayOrders: 2          // Pedidos de ayer
}
```

#### Layout de Anal√≠ticas:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Invoiced today  ‚îÇ #Pending     ‚îÇ
‚îÇ      65.00‚Ç¨      ‚îÇ      1       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ #Delivered today ‚îÇ #Yesterday   ‚îÇ
‚îÇ        1         ‚îÇ      2       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Estilos clave**:
- `analyticsRow`: `flexDirection: 'row'`, `justifyContent: 'space-around'`
- `analyticsCell`: 2 celdas por fila, width `45%`

#### Conceptos Clave:
- **nextStatus()**: Switch que decide qu√© endpoint PATCH llamar seg√∫n estado actual
- **Iconos de estado**: `order_status_pending.png`, `order_status_in_process.png`, etc.
- Icono del bot√≥n Advance: `skip-next` (MaterialCommunityIcons)
- **Refrescar** pedidos Y anal√≠ticas despu√©s de cambiar estado
- Endpoint especial de actualizaci√≥n: `/orders/:id/by-owner` (no el gen√©rico)

---

## üìä Comparativa de Ex√°menes

| Aspecto | Schedules | Address | Orders |
|---------|-----------|---------|--------|
| **Complejidad** | Media-Alta | Baja-Media | Alta |
| **Pantallas nuevas** | 3 | 2 | 2 |
| **Endpoints nuevos** | 4-5 | 4 | 6 |
| **CRUD completo** | ‚úÖ | ‚úÖ | ‚ùå (solo Read + Update) |
| **M√°quina de estados** | ‚ùå | ‚ùå | ‚úÖ |
| **Anal√≠ticas** | ‚ùå | ‚ùå | ‚úÖ |
| **Validaci√≥n regex** | ‚úÖ (tiempo) | ‚úÖ (zip code) | ‚ùå |
| **Modal confirmaci√≥n** | ‚úÖ | ‚úÖ | ‚ùå |
| **Relaciones** | 1:N (schedule-products) | 1:N (user-addresses) | 1:N (restaurant-orders) |

---

## üéØ Consejos Espec√≠ficos por Tipo de Examen

### Si te toca un examen tipo **"Schedule"**:
- ‚úÖ Domina useEffect con `enableReinitialize`
- ‚úÖ Practica validaciones de regex (tiempo, fecha, etc.)
- ‚úÖ Ten clara la navegaci√≥n entre pantallas relacionadas
- ‚úÖ Practica renderizado condicional ("Not Scheduled")
- ‚úÖ Saber mostrar contadores (ej: productos asociados)

### Si te toca un examen tipo **"Address"**:
- ‚úÖ Domina Switch components (para `isDefault`)
- ‚úÖ Practica iconograf√≠a con Ionicons
- ‚úÖ Ten claro PATCH vs PUT (actualizaci√≥n parcial)
- ‚úÖ Practica l√≥gica de "solo uno puede ser default"
- ‚úÖ Validaci√≥n de c√≥digos postales, tel√©fonos, etc.

### Si te toca un examen tipo **"Orders"**:
- ‚úÖ Domina m√°quinas de estado (switch con estados)
- ‚úÖ Practica renderizado de anal√≠ticas con Flexbox
- ‚úÖ Saber usar PATCH para transiciones de estado
- ‚úÖ Refrescar m√∫ltiples datos despu√©s de una acci√≥n
- ‚úÖ Renderizado condicional de botones seg√∫n estado
- ‚úÖ Manejo de n√∫meros decimales (`.toFixed(2)`)

---

## üìå √öltima Revisi√≥n

Este README fue creado analizando **3 ex√°menes completos** (Schedule, Address, Orders) con sus soluciones implementadas. Los patrones identificados son consistentes y repetibles.

**Todos los archivos de soluci√≥n han sido comentados** con explicaciones detalladas para facilitar el estudio.

**¬°Buena suerte en tu examen! üöÄ**
